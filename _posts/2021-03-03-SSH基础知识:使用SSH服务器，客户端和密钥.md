---
layout:       post
title:        "SSH基础知识:使用SSH服务器，客户端和密钥"
subtitle:     "SSH Essentials: Working with SSH Servers, Clients, and Keys"
date:         2021-02-24 09:56:00
author:       "xuepro"
header-img:   "img/home_bg.jpg"
header-mask:  0.3
catalog:      true
multilingual: true
tags:
    - C
---

介紹
SSH是一种安全协议，是远程连接Linux服务器的主要手段。它通过生成一个远程shell来提供一个基于文本的界面。连接后，你在本地终端中输入的所有命令都会被发送到远程服务器并在那里执行。


### SSH概述
最常见的连接到远程Linux服务器的方式是通过SSH。SSH是Secure Shell的缩写，它提供了一种安全可靠的方式来**远程执行命令**、进行更改和配置服务。当你通过SSH连接时，你使用一个存在于远程服务器上的账户登录。

#### SSH的工作原理
当你通过SSH连接时，你将会进入一个shell会话，这是一个基于文本的界面，你可以在这里与你的服务器进行交互。在SSH会话期间，你在本地终端上输入的任何命令都会通过加密的SSH隧道发送，并在服务器上执行。

SSH连接使用客户端-服务器模型实现。这意味着要建立一个SSH连接，远程机器必须运行一个叫做SSH守护进程的软件。该软件监听特定网络端口上的连接，验证连接请求，如果用户提供正确的凭证，则生成相应的环境。

用户的计算机必须有一个SSH客户端。这是一个知道如何使用SSH协议进行通信的软件，可以得到有关要连接到的远程主机的信息、要使用的用户名以及应该传递给验证的凭证。客户端还可以指定他们想要建立的连接类型的某些细节。

#### SSH如何验证用户

客户端一般使用密码（安全性较低，不建议使用）或SSH密钥进行认证，SSH密钥非常安全。

密码登录是加密的，对新用户来说很容易理解。然而，自动机器人和恶意用户经常会反复尝试对允许基于密码登录的账户进行验证，这可能会导致安全漏洞。出于这个原因，我们建议总是为大多数配置设置基于SSH密钥的身份验证。

SSH 密钥是一组匹配的加密密钥，可用于身份验证。每一组都包含一个公钥和一个私钥。公钥可以毫无顾忌地自由共享，而私钥则必须严加防范，决不能暴露给任何人。

要使用SSH密钥进行身份验证，用户必须在本地计算机上拥有一对SSH密钥。在远程服务器上，必须将公钥复制到用户主目录内的 ~/.ssh/authorized_keys 文件中。这个文件包含了授权登录这个账户的公钥列表，每行一个。

当客户端连接到主机，希望使用SSH密钥认证时，会将此意图告知服务器，并告诉服务器要使用哪个公钥。然后服务器会检查其authorized_keys文件中的公钥，生成一个随机字符串，并使用公钥对其进行加密。这个加密的消息只能用相关的私钥来解密。服务器将把这个加密的消息发送给客户端，以测试他们是否真的拥有相关的私钥。

收到这个消息后，客户端将使用私钥对其进行解密，并将揭示的随机字符串与之前协商的会话ID相结合。然后，它将生成这个值的MD5哈希值，并将其传回服务器。服务器已经有了原始消息和会话ID，所以它可以比较这些值生成的MD5哈希值，并确定客户端一定有私钥。

现在你已经知道了SSH的工作原理，我们可以开始讨论一些例子来演示不同的SSH工作方式了


[SSH Essentials: Working with SSH Servers, Clients, and Keys](https://www.digitalocean.com/community/tutorials/ssh-essentials-working-with-ssh-servers-clients-and-keys)
